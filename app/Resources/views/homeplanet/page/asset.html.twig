{% extends 'homeplanet/page/game.html.twig' %}

{% block page_content %}
<div class="row">
<div class="col-12">
	{% embed 'bootstrap/panel.html.twig' %}
	{% block header %}
		Buy asset
	{% endblock %}
	{% block content %}
		<a class="btn btn-primary" href="{{ url('asset_create') }}">Buy building</a>
		<a class="btn btn-warning" href="{{ url('transproute_create') }}">Create trade route</a>
	{% endblock %}
	{% endembed %}
</div>
{% for sLocation, aPawn in aPawnByloc %}
{% set oLocation = aLocation[sLocation] %}
<div class="col-12">
	<div class="card">
	<div class="card-header">
		<div class="row">
		<div class="col-3">
			{{ printo( worldmap.tile( oLocation.x, oLocation.y ), {
				'_suffix': 'link',
				'city': aCity[sLocation]|default(null),
			} ) }}
		</div>
		<div class="col-6">
			{% for iRessId, iQuantity in aFluxByLocation[sLocation]|default([]) %}
				{{iQuantity>0?'+'}}{{ iQuantity }}
				{{ printo(gameview.game.getRessource(iRessId)) }}<br>
			{% endfor %}
		</div>
		<div class="col-3">
			<a class="btn btn-small btn-primary btn-sm pull-right" 
				href="{{ url('asset_create',{location: sLocation}) }}"
			>
				Buy asset
			</a>
		</div>
		</div>
	</div>
	<ul class="list-group list-group-flush">
	{% for oPawn in aPawn %}
		<a class="list-group-item list-group-item-action" href="{{ path('asset_view',{id:oPawn.id}) }}">
			{{ printo( oPawn ) }}
		</a>
	{% endfor %}
	</ul>
	</div>
</div>
{% endfor %}
</div>
{% endblock %}
